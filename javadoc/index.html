<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-adminUIApp.html">adminUIApp</a><ul class='methods'><li data-type='method'><a href="module-adminUIApp.html#~assertElementHasAttribute">assertElementHasAttribute</a></li><li data-type='method'><a href="module-adminUIApp.html#~assertElementIsNotPresent">assertElementIsNotPresent</a></li><li data-type='method'><a href="module-adminUIApp.html#~assertElementIsNotVisible">assertElementIsNotVisible</a></li><li data-type='method'><a href="module-adminUIApp.html#~assertElementIsPresent">assertElementIsPresent</a></li><li data-type='method'><a href="module-adminUIApp.html#~assertElementIsVisible">assertElementIsVisible</a></li><li data-type='method'><a href="module-adminUIApp.html#~assertElementTextContains">assertElementTextContains</a></li><li data-type='method'><a href="module-adminUIApp.html#~assertElementTextEquals">assertElementTextEquals</a></li><li data-type='method'><a href="module-adminUIApp.html#~assertElementTextNotEquals">assertElementTextNotEquals</a></li><li data-type='method'><a href="module-adminUIApp.html#~assertPrimaryNavbarSectionVisible">assertPrimaryNavbarSectionVisible</a></li><li data-type='method'><a href="module-adminUIApp.html#~assertSecondaryNavbarListVisible">assertSecondaryNavbarListVisible</a></li><li data-type='method'><a href="module-adminUIApp.html#~clickPrimaryNavbar">clickPrimaryNavbar</a></li><li data-type='method'><a href="module-adminUIApp.html#~clickSecondaryNavbar">clickSecondaryNavbar</a></li><li data-type='method'><a href="module-adminUIApp.html#~clickUIElement">clickUIElement</a></li><li data-type='method'><a href="module-adminUIApp.html#~getPrimaryNavbarSectionElement">getPrimaryNavbarSectionElement</a></li><li data-type='method'><a href="module-adminUIApp.html#~getSecondaryNavbarListElement">getSecondaryNavbarListElement</a></li><li data-type='method'><a href="module-adminUIApp.html#~gotoHomeScreen">gotoHomeScreen</a></li><li data-type='method'><a href="module-adminUIApp.html#~gotoSigninScreen">gotoSigninScreen</a></li><li data-type='method'><a href="module-adminUIApp.html#~openList">openList</a></li><li data-type='method'><a href="module-adminUIApp.html#~signout">signout</a></li><li data-type='method'><a href="module-adminUIApp.html#~waitForDeleteConfirmationScreen">waitForDeleteConfirmationScreen</a></li><li data-type='method'><a href="module-adminUIApp.html#~waitForForSecondaryNavbar">waitForForSecondaryNavbar</a></li><li data-type='method'><a href="module-adminUIApp.html#~waitForHomeScreen">waitForHomeScreen</a></li><li data-type='method'><a href="module-adminUIApp.html#~waitForInitialFormScreen">waitForInitialFormScreen</a></li><li data-type='method'><a href="module-adminUIApp.html#~waitForItemScreen">waitForItemScreen</a></li><li data-type='method'><a href="module-adminUIApp.html#~waitForListScreen">waitForListScreen</a></li><li data-type='method'><a href="module-adminUIApp.html#~waitForResetConfirmationScreen">waitForResetConfirmationScreen</a></li><li data-type='method'><a href="module-adminUIApp.html#~waitForSigninScreen">waitForSigninScreen</a></li></ul></li><li><a href="module-adminUIDeleteConfirmationScreen.html">adminUIDeleteConfirmationScreen</a><ul class='methods'><li data-type='method'><a href="module-adminUIDeleteConfirmationScreen.html#~cancel">cancel</a></li><li data-type='method'><a href="module-adminUIDeleteConfirmationScreen.html#~delete">delete</a></li></ul></li><li><a href="module-adminUIHomeScreen.html">adminUIHomeScreen</a><ul class='methods'><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertElementHasAttribute">assertElementHasAttribute</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertElementIsNotPresent">assertElementIsNotPresent</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertElementIsNotVisible">assertElementIsNotVisible</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertElementIsPresent">assertElementIsPresent</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertElementIsVisible">assertElementIsVisible</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertElementTextContains">assertElementTextContains</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertElementTextEquals">assertElementTextEquals</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertElementTextNotEquals">assertElementTextNotEquals</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertTabDOMNotPresent">assertTabDOMNotPresent</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertTabDOMPresent">assertTabDOMPresent</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertTabTextContains">assertTabTextContains</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertTabTextEquals">assertTabTextEquals</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertTabUINotVisible">assertTabUINotVisible</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~assertTabUIVisible">assertTabUIVisible</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~clickTabUI">clickTabUI</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~configureTabUI">configureTabUI</a></li><li data-type='method'><a href="module-adminUIHomeScreen.html#~openList">openList</a></li></ul></li><li><a href="module-adminUIInitialForm.html">adminUIInitialForm</a><ul class='methods'><li data-type='method'><a href="module-adminUIInitialForm.html#~assertElementHasAttribute">assertElementHasAttribute</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertElementIsNotPresent">assertElementIsNotPresent</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertElementIsNotVisible">assertElementIsNotVisible</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertElementIsPresent">assertElementIsPresent</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertElementIsVisible">assertElementIsVisible</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertElementTextContains">assertElementTextContains</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertElementTextEquals">assertElementTextEquals</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertElementTextNotEquals">assertElementTextNotEquals</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertFieldDOMNotPresent">assertFieldDOMNotPresent</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertFieldDOMPresent">assertFieldDOMPresent</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertFieldInputs">assertFieldInputs</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertFieldUINotVisible">assertFieldUINotVisible</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~assertFieldUIVisible">assertFieldUIVisible</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~cancel">cancel</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~clickFieldUI">clickFieldUI</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~fillFieldInputs">fillFieldInputs</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~save">save</a></li><li data-type='method'><a href="module-adminUIInitialForm.html#~setDefaultModelTestConfig">setDefaultModelTestConfig</a></li></ul></li><li><a href="module-adminUIItemScreen.html">adminUIItemScreen</a><ul class='methods'><li data-type='method'><a href="module-adminUIItemScreen.html#~assertElementHasAttribute">assertElementHasAttribute</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertElementIsNotPresent">assertElementIsNotPresent</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertElementIsNotVisible">assertElementIsNotVisible</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertElementIsPresent">assertElementIsPresent</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertElementIsVisible">assertElementIsVisible</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertElementTextContains">assertElementTextContains</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertElementTextEquals">assertElementTextEquals</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertElementTextNotEquals">assertElementTextNotEquals</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertFieldDOMNotPresent">assertFieldDOMNotPresent</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertFieldDOMPresent">assertFieldDOMPresent</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertFieldInputs">assertFieldInputs</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertFieldUINotVisible">assertFieldUINotVisible</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~assertFieldUIVisible">assertFieldUIVisible</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~back">back</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~clickFieldUI">clickFieldUI</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~delete">delete</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~fillFieldInputs">fillFieldInputs</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~navitageToFirstRelationship">navitageToFirstRelationship</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~new">new</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~reset">reset</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~save">save</a></li><li data-type='method'><a href="module-adminUIItemScreen.html#~setDefaultModelTestConfig">setDefaultModelTestConfig</a></li></ul></li><li><a href="module-adminUIListScreen.html">adminUIListScreen</a><ul class='methods'><li data-type='method'><a href="module-adminUIListScreen.html#~assertElementHasAttribute">assertElementHasAttribute</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertElementIsNotPresent">assertElementIsNotPresent</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertElementIsNotVisible">assertElementIsNotVisible</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertElementIsPresent">assertElementIsPresent</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertElementIsVisible">assertElementIsVisible</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertElementTextContains">assertElementTextContains</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertElementTextEquals">assertElementTextEquals</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertElementTextNotEquals">assertElementTextNotEquals</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertItemDeleteIconNotPresent">assertItemDeleteIconNotPresent</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertItemDeleteIconNotVisible">assertItemDeleteIconNotVisible</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertItemDeleteIconPresent">assertItemDeleteIconPresent</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertItemDeleteIconVisible">assertItemDeleteIconVisible</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertItemFieldUINotPresent">assertItemFieldUINotPresent</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertItemFieldUINotVisible">assertItemFieldUINotVisible</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertItemFieldUIPresent">assertItemFieldUIPresent</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertItemFieldUIVisible">assertItemFieldUIVisible</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertItemFieldValueContains">assertItemFieldValueContains</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertItemFieldValueEquals">assertItemFieldValueEquals</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertListHeaderValueContains">assertListHeaderValueContains</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertListHeaderValueEquals">assertListHeaderValueEquals</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~assertListHeaderVisible">assertListHeaderVisible</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~clickCreateItemButton">clickCreateItemButton</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~clickDeleteItemIcon">clickDeleteItemIcon</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~clickItemFieldValue">clickItemFieldValue</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~clickSearchInputClearIcon">clickSearchInputClearIcon</a></li><li data-type='method'><a href="module-adminUIListScreen.html#~setDefaultModelTestConfig">setDefaultModelTestConfig</a></li></ul></li><li><a href="module-adminUIResetConfirmationScreen.html">adminUIResetConfirmationScreen</a><ul class='methods'><li data-type='method'><a href="module-adminUIResetConfirmationScreen.html#~cancel">cancel</a></li><li data-type='method'><a href="module-adminUIResetConfirmationScreen.html#~reset">reset</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#signin">signin</a></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>End-2-End Functional Testing Framework</h1><p>This is an overview of the end-2-end UI/functional testing framework for KeystoneJS and keystoneJS applications.<br>UI/functional end-to-end tests ensure regression coverage of all aspects of a KeystoneJS application as well as
ensures that KeystoneJS itself has not regressed on the application functionality.  The tests use a real keystone
application and should do so with as much available configuration as possible.  Please note that this is not a
replacement for component-based unit testing, which attempt to do full regression coverage of all the operations 
a particular application component is responsible for.  This framework uses the <a href="http://nightwatchjs.org/">nightwatchjs.org</a>
functional test framework.  Thus, if you will be contributing updates to this framework it is a good idea to have 
some familiarity with its concepts.  If all you are interested in is writing your own e2e tests for your own
application then you do not really need to become an expert in NightwatchJS but some familiarity with it is still 
greatly recommended.  Below we outline all you need to do to get started. </p>
<h2>Installation</h2><p><code>npm install keystone-nightwatch-e2e --save-dev</code></p>
<h2>Test Environment Setup</h2><p>For a sample e2e test setup, please refer to the one in the KeystoneJS repo that is used for for testing<br>KeystoneJS AdminUI functionality.  Using that structure in your own application and then updating it per your 
application requirements is a good first step. The following is an overview of that setup and highlights what
you may change/remove from your own setup:</p>
<pre class="prettyprint source"><code>test/e2e
    global.js                               => common nightwatch test environment config

    server.js                               => keystone test app server (update per your application requirements)

    adminUI                                 => adminUI e2e test suite
        nightwatch.json                     => nightwatch config (nightwatch starts the selenium server)
        nightwatch-no-process.json          => nightwatch config (the e2e framework starts the selenium server)
        tests                               => directory to group all e2e tests
            groupNNN&lt;group-name>            => adminUI test group, where NNN is a group sequence number (add your own groups)
                uiTest&lt;test-name>           => UI test suite (add your own UI tests)
                uxTest&lt;test-name>           => UX/functional test suite (add your own UX tests)

    drivers
        &lt;browser drivers>                   => all required browser drivers

    frontend                                => frontend pages (you probably don't need this as you already should have these already defined)
        &lt;page content>                      => these are your application frontend pages

    modelTestConfig                         => describe your application models to the test framework
       ...                                  => use the existing ones as guidelines

    models                                  => all application list models (you probably don't need this as you already should have these already defined)
       ...                                  

    routes                                  => frontend routes (you probably don't need this as you already should have these already defined)
        &lt;route content>                     => these are your application frontend pages

    updates                                 => all schema update/migration files (you probably don't need this as you already should have these already defined)
       &lt;update scripts>                     => keystone updates</code></pre><h2>Running Tests</h2><p>Testing is a critical part of any keystone commit to ensure the commit has not introduced any
UI or functional regressions.  Make sure to run all keystone tests prior to pushing any commits.
If your commit fixes a bug but breaks the UI/functional test suite please make sure that you also
update the test suite so that any broken tests pass again.  You can run any of the following
from keystone's root directory:</p>
<pre class="prettyprint source"><code>Pre-requisites:
    - Make sure that you have Firefox (or Chrome) installed.  Firefox is the default browser used.
      Using Chrome requires specifying a different --env parameter (see below).  For any tests below
      you may replace the &quot;--env default&quot; parameter with one of the following:

        --env chrome, if you are on a linux 64-bit system
        --env chrome-linux32, if you are on a linux 32-bit system
        --env chrome-mac32, if you are on a mac system
        --env chrome-win32, if you are on a windows system

       You'll also have to download the chrome drivers from http://www.seleniumhq.org/download/
       Once you have downloaded them, you need to save these as:

        test/e2e/drivers/chrome/linux64/chromedriver, if you are on a linux 64-bit system
        test/e2e/drivers/chrome/linux32/chromedriver, if you are on a linux 32-bit system
        test/e2e/drivers/chrome/mac32/chromedriver, if you are on a mac system
        test/e2e/drivers/chrome/win32/chromedriver, if you are on a windows system

      For browser compatibility, see http://www.seleniumhq.org/about/platforms.jsp#browsers

    - Make sure that you have a local mongo instance running.
    - Make sure that port 3000 is available; if not please tell the e2e server what port it
      should bind to.  For example, to use port 9999 do the following (in a bash shell):

        export KEYSTONEJS_PORT=9999

    - Make sure to:

        export KEYSTONE_PREBUILD_ADMIN=true

Running in your local environment using all defaults (good to do before doing a commit):

    npm run test-e2e

If the above npm run command does not work for you then there are some issues with selenium and some platforms.
Try the following instead:

    npm run test-e2e-bg

If you are in active development and just want to run a single group in your local environment:

    node test/e2e/server.js --env default --config ./test/e2e/adminUI/nightwatch.json --group test/e2e/adminUI/tests/&lt;group>

    or, if the above doesn't work in your platform try:

    node test/e2e/server.js --env default --selenium-in-background --config ./test/e2e/adminUI/nightwatch-no-process.json --group test/e2e/adminUI/tests/&lt;group>

Running a single test in your local environment:

    node test/e2e/server.js --env default --config ./test/e2e/adminUI/nightwatch.json --test test/e2e/adminUI/tests/&lt;group>/&lt;test>

    or, if the above doesn't work in your platform try:

    node test/e2e/server.js --env default --selenium-in-background --config ./test/e2e/adminUI/nightwatch-no-process.json --test test/e2e/adminUI/tests/&lt;group>/&lt;test>


Travis builds will run:

    npm run test-e2e-saucelabs

If you want to run the e2e keystone test app server standalone then run as follows:

    export KEYSTONEJS_PORT=9999 && node test/e2e/server.js --notest

If you want to run the e2e keystone test app server standalone without dropping the database then run as follows:

    export KEYSTONEJS_PORT=9999 && node test/e2e/server.js --notest --nodrop


This allows you to experiment with the exact same setup the test do!</code></pre><h2>Adding New Tests</h2><p>You should consider adding new UI/UX/Functional tests if:</p>
<ul>
<li>you introduce new UI elements (e.g., a new field type).</li>
<li>you introduce new client side functionality that may cause a different UX experience.</li>
<li>you introduce new server side functionality that may cause a different UX experience.</li>
<li>you fix a bug that's does not have UI/UX/Functional test coverage</li>
</ul>
<h2>Test Organization</h2><p>The best approach to keeping tests well organized is to:</p>
<ul>
<li>when writing new tests, use an existing one as an example.</li>
<li>keep the test style consistent.</li>
<li>keep the test file structure consistent.</li>
<li>each test group must run on its own using the <code>--group</code> argument (that means, that each test within the group must undo
any changes it does to the state of the UI)</li>
<li>each test within a group must run on its own using the <code>--test</code> argument (that means, that each test must undo
any changes it does to the state of the UI)</li>
<li>when naming selectors (e.g., in adminUI.js) make sure to use a very descriptive name</li>
</ul>
<h2>Adding Field Tests</h2><p>Built-in KeystoneJS fields are tested via Field Test Objects (see lib/src/fieldTestObjects).  If and when KeystoneJS
allows creating custom fields we will provide guidelines for writing Field Test Objects on your own.  If you are adding
support for a KeystoneJS built-in field type then follow the same structure as the existing Field Test Objects. </p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Fri Oct 28 2016 08:08:14 GMT+0000 (UTC) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>